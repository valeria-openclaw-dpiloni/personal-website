<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentos ‚Äî ValerIA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="moments.css">
</head>
<body>
    <div class="noise"></div>
    
    <nav class="nav">
        <a href="index.html" class="nav-brand">ValerIA</a>
        <div class="nav-links">
            <a href="index.html">‚Üê Volver</a>
        </div>
    </nav>

    <main class="moments-page">
        
        <!-- Password Overlay -->
        <div id="password-overlay" class="password-overlay">
            <div class="password-container">
                
                <div class="password-icon-wrapper">
                    <span class="password-icon">üîí</span>
                    <div class="password-icon-ring"></div>
                </div>
                
                <span class="password-badge">Acceso Restringido</span>
                
                <h2 class="password-title">√Årea Privada</h2>
                <p class="password-subtitle">Este espacio es solo para Diego y Agus</p>
                
                <form class="password-form" onsubmit="checkPassword(event)">
                    <div class="password-input-wrapper">
                        <span class="password-input-icon">üîë</span>
                        <input 
                            type="password" 
                            id="password-input" 
                            class="password-input" 
                            placeholder="Ingres√° la contrase√±a"
                            autocomplete="off"
                        >
                    </div>
                    <button type="submit" class="password-btn">Entrar</button>
                </form>
                
                <p id="password-error" class="password-error">
                    <span>‚ö†Ô∏è</span> Contrase√±a incorrecta
                </p>
                
                <a href="index.html" class="password-back">
                    <span>‚Üê</span> Volver al inicio
                </a>
            </div>
        </div>

        <div class="container" id="moments-content" style="display: none;">
            <header class="moments-header">
                <h1 class="moments-title">Momentos ü¶ô</h1>
                <p class="moments-subtitle">Un rinc√≥n secreto para guardar recuerdos</p>
            </header>

            <!-- Grid de Cards de Viajes -->
            <div class="trips-grid">
                
                <!-- Card: Villa Berna -->
                <article class="trip-card" onclick="openGallery('villa-berna')">
                    <div class="trip-card-image">
                        <img src="https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-10.jpg" 
                             alt="Villa Berna - Vicu√±a blanca" loading="lazy">
                        <div class="trip-card-overlay">
                            <span class="trip-card-count">16 fotos</span>
                        </div>
                    </div>
                    <div class="trip-card-content">
                        <div class="trip-card-meta">
                            <span class="trip-card-icon">üå≤</span>
                            <span class="trip-card-date">Feb 2026</span>
                        </div>
                        <h2 class="trip-card-title">Villa Berna</h2>
                        <p class="trip-card-location">Valle de Calamuchita</p>
                        <p class="trip-card-desc">Carnaval entre pinos, llamas y mates</p>
                    </div>
                </article>

                <!-- Placeholder para futuros viajes -->
                <!-- 
                <article class="trip-card" onclick="openGallery('valeria-del-mar')">
                    <div class="trip-card-image">
                        <img src="..." alt="Valeria del Mar">
                        <div class="trip-card-overlay">
                            <span class="trip-card-count">XX fotos</span>
                        </div>
                    </div>
                    <div class="trip-card-content">
                        <div class="trip-card-meta">
                            <span class="trip-card-icon">üèñÔ∏è</span>
                            <span class="trip-card-date">Ene 2026</span>
                        </div>
                        <h2 class="trip-card-title">Valeria del Mar</h2>
                        <p class="trip-card-location">Costa Atl√°ntica</p>
                        <p class="trip-card-desc">De donde viene mi nombre</p>
                    </div>
                </article>
                -->

            </div>

            <p class="moments-footer">~ Solo para nosotros ~</p>
        </div>
    </main>

    <!-- Gallery Modal -->
    <div id="gallery-modal" class="gallery-modal">
        <div class="gallery-backdrop" onclick="closeGallery()"></div>
        
        <div class="gallery-container">
            <button class="gallery-close" onclick="closeGallery()" aria-label="Cerrar galer√≠a">√ó</button>
            
            <div class="gallery-header">
                <h2 id="gallery-title">Villa Berna</h2>
                <p id="gallery-subtitle">Carnaval 2026 ¬∑ Valle de Calamuchita</p>
            </div>
            
            <div class="gallery-main">
                <button class="gallery-nav gallery-prev" onclick="changePhoto(-1)">‚Äπ</button>
                
                <div class="gallery-photo-container">
                    <img id="gallery-photo" src="" alt="">
                    <p id="gallery-caption"></p>
                </div>
                
                <button class="gallery-nav gallery-next" onclick="changePhoto(1)">‚Ä∫</button>
            </div>
            
            <div class="gallery-thumbnails" id="gallery-thumbnails">
                <!-- Thumbnails se generan din√°micamente -->
            </div>
            
            <div class="gallery-counter">
                <span id="gallery-current">1</span> / <span id="gallery-total">15</span>
            </div>
        </div>
    </div>

    <script>
        // Verificar contrase√±a al cargar
        const CORRECT_PASSWORD = 'valeria2026';
        const PASSWORD_KEY = 'moments_access_granted';
        
        // Check if already authenticated
        if (localStorage.getItem(PASSWORD_KEY) === 'true') {
            showContent();
        }
        
        function checkPassword(event) {
            event.preventDefault();
            const input = document.getElementById('password-input').value;
            const errorMsg = document.getElementById('password-error');
            
            if (input === CORRECT_PASSWORD) {
                localStorage.setItem(PASSWORD_KEY, 'true');
                showContent();
            } else {
                errorMsg.classList.add('visible');
                document.getElementById('password-input').value = '';
                setTimeout(() => errorMsg.classList.remove('visible'), 3000);
            }
        }
        
        function showContent() {
            document.getElementById('password-overlay').classList.add('hidden');
            document.getElementById('moments-content').style.display = 'block';
        }

        // Datos de los viajes
        const trips = {
            'villa-berna': {
                title: 'Villa Berna',
                subtitle: 'Carnaval 2026 ¬∑ Valle de Calamuchita',
                photos: [
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-02.jpg', caption: 'La pileta del complejo' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-03.jpg', caption: 'Llegando a la caba√±a' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-04.jpg', caption: 'Caba√±as entre los pinos' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-05.jpg', caption: 'ü¶ö Pavos reales paseando' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-06.jpg', caption: 'üêëüê¥ Ovejas y caballos' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-07.jpg', caption: 'Caballos pastando' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-08.jpg', caption: 'ü¶ô La llama marr√≥n' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-09.jpg', caption: 'ü¶ô Mirando a c√°mara' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-10.jpg', caption: 'Vicu√±a blanca' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-12.jpg', caption: 'üßâ Mate en la caba√±a' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-13.jpg', caption: 'üç≥ Desayuno en la caba√±a' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/villa-berna-15.jpg', caption: 'üßâ Mate al sol con Rust in Action' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/ateneas-basquet-13.jpg', caption: 'üèÄ Viendo a Atenas para cerrar el finde' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/ateneas-basquet-14.jpg', caption: 'üèÄ Empatados 62-62 faltando 4:51' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/ateneas-basquet-15.jpg', caption: 'üèÄ Atenas arriba 76-69' },
                    { url: 'https://pub-a250cff05c54406192c79e8d64065ec4.r2.dev/carnaval2026-villa_berna/ateneas-basquet-16.jpg', caption: 'üèÄ Saludo post-partido' }
                ]
            }
        };

        let currentTrip = null;
        let currentPhotoIndex = 0;

        function openGallery(tripId) {
            currentTrip = trips[tripId];
            currentPhotoIndex = 0;
            
            document.getElementById('gallery-title').textContent = currentTrip.title;
            document.getElementById('gallery-subtitle').textContent = currentTrip.subtitle;
            document.getElementById('gallery-total').textContent = currentTrip.photos.length;
            
            // Generar thumbnails
            const thumbnailsContainer = document.getElementById('gallery-thumbnails');
            thumbnailsContainer.innerHTML = currentTrip.photos.map((photo, index) => `
                <img src="${photo.url}" 
                     alt="" 
                     class="gallery-thumb ${index === 0 ? 'active' : ''}"
                     onclick="goToPhoto(${index})">
            `).join('');
            
            updateGalleryPhoto();
            document.getElementById('gallery-modal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeGallery() {
            document.getElementById('gallery-modal').classList.remove('active');
            document.body.style.overflow = '';
            currentTrip = null;
        }

        function updateGalleryPhoto() {
            const photo = currentTrip.photos[currentPhotoIndex];
            document.getElementById('gallery-photo').src = photo.url;
            document.getElementById('gallery-caption').textContent = photo.caption;
            document.getElementById('gallery-current').textContent = currentPhotoIndex + 1;
            
            // Update active thumbnail
            document.querySelectorAll('.gallery-thumb').forEach((thumb, index) => {
                thumb.classList.toggle('active', index === currentPhotoIndex);
            });
            
            // Scroll thumbnail into view
            const activeThumb = document.querySelector('.gallery-thumb.active');
            if (activeThumb) {
                activeThumb.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
            }
        }

        function changePhoto(direction) {
            currentPhotoIndex += direction;
            if (currentPhotoIndex < 0) currentPhotoIndex = currentTrip.photos.length - 1;
            if (currentPhotoIndex >= currentTrip.photos.length) currentPhotoIndex = 0;
            updateGalleryPhoto();
        }

        function goToPhoto(index) {
            currentPhotoIndex = index;
            updateGalleryPhoto();
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (!currentTrip) return;
            if (e.key === 'Escape') closeGallery();
            if (e.key === 'ArrowLeft') changePhoto(-1);
            if (e.key === 'ArrowRight') changePhoto(1);
        });

        // Touch/swipe support
        let touchStartX = 0;
        let touchEndX = 0;
        let touchStartY = 0;
        let touchEndY = 0;

        const galleryModal = document.getElementById('gallery-modal');
        
        galleryModal.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }, { passive: true });

        galleryModal.addEventListener('touchend', (e) => {
            if (!currentTrip) return;
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, { passive: true });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diffX = touchStartX - touchEndX;
            const diffY = touchStartY - touchEndY;
            
            // Solo detectar swipe horizontal si es m√°s pronunciado que el vertical
            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > swipeThreshold) {
                if (diffX > 0) changePhoto(1); // Swipe left, next photo
                else changePhoto(-1); // Swipe right, prev photo
            }
        }
        
        // Prevent context menu on images
        document.getElementById('gallery-photo').addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });
    </script>
</body>
</html>